/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/svgpath@2.6.0/lib/svgpath.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var pathParse=require("./path_parse"),transformParse=require("./transform_parse"),matrix=require("./matrix"),a2c=require("./a2c"),ellipse=require("./ellipse");function SvgPath(t){if(!(this instanceof SvgPath))return new SvgPath(t);var e=pathParse(t);this.segments=e.segments,this.err=e.err,this.__stack=[]}SvgPath.from=function(t){if("string"==typeof t)return new SvgPath(t);if(t instanceof SvgPath){var e=new SvgPath("");return e.err=t.err,e.segments=t.segments.map((function(t){return t.slice()})),e.__stack=t.__stack.map((function(t){return matrix().matrix(t.toArray())})),e}throw new Error("SvgPath.from: invalid param type "+t)},SvgPath.prototype.__matrix=function(t){var e,r=this;t.queue.length&&this.iterate((function(a,s,i,n){var o,h,c,u;switch(a[0]){case"v":h=0===(o=t.calc(0,a[1],!0))[0]?["v",o[1]]:["l",o[0],o[1]];break;case"V":h=(o=t.calc(i,a[1],!1))[0]===t.calc(i,n,!1)[0]?["V",o[1]]:["L",o[0],o[1]];break;case"h":h=0===(o=t.calc(a[1],0,!0))[1]?["h",o[0]]:["l",o[0],o[1]];break;case"H":h=(o=t.calc(a[1],n,!1))[1]===t.calc(i,n,!1)[1]?["H",o[0]]:["L",o[0],o[1]];break;case"a":case"A":var v=t.toArray(),f=ellipse(a[1],a[2],a[3]).transform(v);if(v[0]*v[3]-v[1]*v[2]<0&&(a[5]=a[5]?"0":"1"),o=t.calc(a[6],a[7],"a"===a[0]),"A"===a[0]&&a[6]===i&&a[7]===n||"a"===a[0]&&0===a[6]&&0===a[7]){h=["a"===a[0]?"l":"L",o[0],o[1]];break}h=f.isDegenerate()?["a"===a[0]?"l":"L",o[0],o[1]]:[a[0],f.rx,f.ry,f.ax,a[4],a[5],o[0],o[1]];break;case"m":u=s>0,h=["m",(o=t.calc(a[1],a[2],u))[0],o[1]];break;default:for(h=[c=a[0]],u=c.toLowerCase()===c,e=1;e<a.length;e+=2)o=t.calc(a[e],a[e+1],u),h.push(o[0],o[1])}r.segments[s]=h}),!0)},SvgPath.prototype.__evaluateStack=function(){var t,e;if(this.__stack.length){if(1===this.__stack.length)return this.__matrix(this.__stack[0]),void(this.__stack=[]);for(t=matrix(),e=this.__stack.length;--e>=0;)t.matrix(this.__stack[e].toArray());this.__matrix(t),this.__stack=[]}},SvgPath.prototype.toString=function(){var t="",e="",r=!1;this.__evaluateStack();for(var a=0,s=this.segments.length;a<s;a++){var i=this.segments[a],n=i[0];n!==e||"m"===n||"M"===n?("m"===n&&"z"===e&&(t+=" "),t+=n,r=!1):r=!0;for(var o=1;o<i.length;o++){var h=i[o];1===o?r&&h>=0&&(t+=" "):h>=0&&(t+=" "),t+=h}e=n}return t},SvgPath.prototype.translate=function(t,e){return this.__stack.push(matrix().translate(t,e||0)),this},SvgPath.prototype.scale=function(t,e){return this.__stack.push(matrix().scale(t,e||0===e?e:t)),this},SvgPath.prototype.rotate=function(t,e,r){return this.__stack.push(matrix().rotate(t,e||0,r||0)),this},SvgPath.prototype.skewX=function(t){return this.__stack.push(matrix().skewX(t)),this},SvgPath.prototype.skewY=function(t){return this.__stack.push(matrix().skewY(t)),this},SvgPath.prototype.matrix=function(t){return this.__stack.push(matrix().matrix(t)),this},SvgPath.prototype.transform=function(t){return t.trim()?(this.__stack.push(transformParse(t)),this):this},SvgPath.prototype.round=function(t){var e,r=0,a=0,s=0,i=0;return t=t||0,this.__evaluateStack(),this.segments.forEach((function(n){var o=n[0].toLowerCase()===n[0];switch(n[0]){case"H":case"h":return o&&(n[1]+=s),s=n[1]-n[1].toFixed(t),void(n[1]=+n[1].toFixed(t));case"V":case"v":return o&&(n[1]+=i),i=n[1]-n[1].toFixed(t),void(n[1]=+n[1].toFixed(t));case"Z":case"z":return s=r,void(i=a);case"M":case"m":return o&&(n[1]+=s,n[2]+=i),s=n[1]-n[1].toFixed(t),i=n[2]-n[2].toFixed(t),r=s,a=i,n[1]=+n[1].toFixed(t),void(n[2]=+n[2].toFixed(t));case"A":case"a":return o&&(n[6]+=s,n[7]+=i),s=n[6]-n[6].toFixed(t),i=n[7]-n[7].toFixed(t),n[1]=+n[1].toFixed(t),n[2]=+n[2].toFixed(t),n[3]=+n[3].toFixed(t+2),n[6]=+n[6].toFixed(t),void(n[7]=+n[7].toFixed(t));default:return e=n.length,o&&(n[e-2]+=s,n[e-1]+=i),s=n[e-2]-n[e-2].toFixed(t),i=n[e-1]-n[e-1].toFixed(t),void n.forEach((function(e,r){r&&(n[r]=+n[r].toFixed(t))}))}})),this},SvgPath.prototype.iterate=function(t,e){var r,a,s,i=this.segments,n={},o=!1,h=0,c=0,u=0,v=0;if(e||this.__evaluateStack(),i.forEach((function(e,r){var a=t(e,r,h,c);Array.isArray(a)&&(n[r]=a,o=!0);var s=e[0]===e[0].toLowerCase();switch(e[0]){case"m":case"M":return h=e[1]+(s?h:0),c=e[2]+(s?c:0),u=h,void(v=c);case"h":case"H":return void(h=e[1]+(s?h:0));case"v":case"V":return void(c=e[1]+(s?c:0));case"z":case"Z":return h=u,void(c=v);default:h=e[e.length-2]+(s?h:0),c=e[e.length-1]+(s?c:0)}})),!o)return this;for(s=[],r=0;r<i.length;r++)if(void 0!==n[r])for(a=0;a<n[r].length;a++)s.push(n[r][a]);else s.push(i[r]);return this.segments=s,this},SvgPath.prototype.abs=function(){return this.iterate((function(t,e,r,a){var s,i=t[0],n=i.toUpperCase();if(i!==n)switch(t[0]=n,i){case"v":return void(t[1]+=a);case"a":return t[6]+=r,void(t[7]+=a);default:for(s=1;s<t.length;s++)t[s]+=s%2?r:a}}),!0),this},SvgPath.prototype.rel=function(){return this.iterate((function(t,e,r,a){var s,i=t[0],n=i.toLowerCase();if(i!==n&&(0!==e||"M"!==i))switch(t[0]=n,i){case"V":return void(t[1]-=a);case"A":return t[6]-=r,void(t[7]-=a);default:for(s=1;s<t.length;s++)t[s]-=s%2?r:a}}),!0),this},SvgPath.prototype.unarc=function(){return this.iterate((function(t,e,r,a){var s,i,n,o=[],h=t[0];return"A"!==h&&"a"!==h?null:("a"===h?(i=r+t[6],n=a+t[7]):(i=t[6],n=t[7]),0===(s=a2c(r,a,i,n,t[4],t[5],t[1],t[2],t[3])).length?[["a"===t[0]?"l":"L",t[6],t[7]]]:(s.forEach((function(t){o.push(["C",t[2],t[3],t[4],t[5],t[6],t[7]])})),o))})),this},SvgPath.prototype.unshort=function(){var t,e,r,a,s,i=this.segments;return this.iterate((function(n,o,h,c){var u,v=n[0],f=v.toUpperCase();o&&("T"===f?(u="t"===v,"Q"===(r=i[o-1])[0]?(t=r[1]-h,e=r[2]-c):"q"===r[0]?(t=r[1]-r[3],e=r[2]-r[4]):(t=0,e=0),a=-t,s=-e,u||(a+=h,s+=c),i[o]=[u?"q":"Q",a,s,n[1],n[2]]):"S"===f&&(u="s"===v,"C"===(r=i[o-1])[0]?(t=r[3]-h,e=r[4]-c):"c"===r[0]?(t=r[3]-r[5],e=r[4]-r[6]):(t=0,e=0),a=-t,s=-e,u||(a+=h,s+=c),i[o]=[u?"c":"C",a,s,n[1],n[2],n[3],n[4]]))})),this},module.exports=SvgPath;
//# sourceMappingURL=/sm/244bee47d4830948d8bae366fa1c8689d5802c6cba8d6049762f4a5a5e6a1e6d.map